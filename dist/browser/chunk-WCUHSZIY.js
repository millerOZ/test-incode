import{a as Q,b as g}from"./chunk-IVVUZLMP.js";import{d as B}from"./chunk-DOBZLDMO.js";import{$a as A,Aa as w,Ba as l,Ca as D,Da as k,Ea as R,Fa as p,Ha as u,N as C,P as d,Ra as T,W as S,X as v,_ as V,_a as K,aa as _,ab as N,bb as f,ka as x,la as y,ra as h,sa as E,ta as b,ua as m,va as F,wa as i,xa as o,ya as c,za as I}from"./chunk-SQOWPWAF.js";import{j as s}from"./chunk-WLMSNEJV.js";var L=["frontbackcamera"],M=class n{constructor(t){this.incodeSDK=t;b(()=>s(this,null,function*(){yield this.renderCaptureId()}),{phase:E.Write})}session;nextStepEvent=new _;cameraRef;subscription;renderCaptureId(){return s(this,null,function*(){console.log("CAMERA FRONT",this.session),this.session&&(yield this.incodeSDK.incode.renderCaptureId(this.cameraRef?.nativeElement,{session:this.session,forceIdV2:!0,onSuccess:()=>s(this,null,function*(){console.log("ID capture successful!, renderCaptureId"),yield this.incodeSDK.incode.processId({token:this.session.token}),this.nextStepEvent.emit({camera:"selfie"})}),onError:t=>{console.error("ID capture failed:",t)}}))})}renderUserConsent(){return s(this,null,function*(){console.log("renderUserConsent"),this.session&&(yield this.incodeSDK.incode.renderUserConsent(this.cameraRef?.nativeElement,{session:this.session,title:"Privacy and Cookies Consent",text:"We use cookies to ensure you get the best experience on our website. By continuing, you agree to our privacy policy.",onSuccess:()=>{this.renderCaptureId()}}))})}renderBiometricConsent(){return s(this,null,function*(){console.log("renderUserConsent"),this.session&&(yield this.incodeSDK.incode.renderBiometricConsent(this.cameraRef?.nativeElement,{token:this.session,onSuccess:()=>{this.renderCaptureId()},onCancel:console.log,regulationType:"US_Illinois"}))})}renderDocumentSelector(){return s(this,null,function*(){console.log("renderCombinedConsent"),this.session&&(yield this.incodeSDK.incode.renderDocumentSelector(this.cameraRef?.nativeElement,{token:this.session,onSuccess:()=>{this.nextStepEvent.emit({camera:"selfie"})},onError:()=>{}}))})}static \u0275fac=function(e){return new(e||n)(y(g))};static \u0275cmp=d({type:n,selectors:[["front-back-id"]],viewQuery:function(e,a){if(e&1&&D(L,5),e&2){let r;k(r=R())&&(a.cameraRef=r.first)}},inputs:{session:"session"},outputs:{nextStepEvent:"nextStepEvent"},standalone:!0,features:[u],decls:3,vars:0,consts:[["frontbackcamera",""],[1,"module-content"]],template:function(e,a){e&1&&(i(0,"div",1),c(1,"div",null,0),o())},dependencies:[f],styles:["[_nghost-%COMP%]     .fldPIp{text-align:center}[_nghost-%COMP%]     .dmlQOO{color:#006aff;font-family:Gilroy-medium,sans-serif}[_nghost-%COMP%]     .dLaCtM{color:#006aff}"]})};var q=["selfiecamera"],O=class n{constructor(t){this.incodeSDK=t;b(()=>s(this,null,function*(){yield this.renderCamera()}),{phase:E.Write})}session;nextStepEvent=new _;cameraRef;renderCamera(){return s(this,null,function*(){console.log("CAMERA SELFIE"),yield this.incodeSDK.incode.renderCamera("selfie",this.cameraRef?.nativeElement,{token:this.session,showTutorial:!0,hatCheckEnabled:!0,lensesCheckEnabled:!0,maskCheckEnabled:!0,eyesClosedCheckEnabled:!0,numberOfTries:3,onError:()=>{this.nextStepEvent.emit()},onSuccess:t=>s(this,null,function*(){this.incodeSDK.incode.processFace({token:this.session}),console.log("FIINISHED SELFIE",t),this.nextStepEvent.emit(t)}),onLog:t=>{console.log("Selfie camera log event",t)}})})}renderVideoCamera(){return s(this,null,function*(){console.log("CAMERA SELFIE"),yield this.incodeSDK.incode.renderVideoSelfie(this.cameraRef?.nativeElement,{token:this.session,showTutorial:!0,hatCheckEnabled:!0,lensesCheckEnabled:!0,maskCheckEnabled:!0,eyesClosedCheckEnabled:!0},{onError:()=>{this.nextStepEvent.emit()},onSuccess:()=>{this.incodeSDK.incode.processFace({token:this.session})}})})}static \u0275fac=function(e){return new(e||n)(y(g))};static \u0275cmp=d({type:n,selectors:[["selfie"]],viewQuery:function(e,a){if(e&1&&D(q,5),e&2){let r;k(r=R())&&(a.cameraRef=r.first)}},inputs:{session:"session"},outputs:{nextStepEvent:"nextStepEvent"},standalone:!0,features:[u],decls:3,vars:0,consts:[["selfiecamera",""],[1,"module-content"]],template:function(e,a){e&1&&(i(0,"div",1),c(1,"div",null,0),o())},dependencies:[f]})};function W(n,t){if(n&1){let e=I();i(0,"div",0)(1,"div",3),c(2,"img",4),i(3,"h1"),p(4,"Te pediremos algunas fotos"),o(),i(5,"ul")(6,"li"),c(7,"img",5),i(8,"span"),p(9,"Hazte en un lugar c\xF3modo e iluminado"),o()(),i(10,"li"),c(11,"img",6),i(12,"span"),p(13," Mant\xE9n una expresi\xF3n neutra y qu\xEDtate gafas oscuras, gorras o bufandas "),o()(),i(14,"li"),c(15,"img",7),i(16,"span"),p(17,"Ten a la mano tu documento de identidad"),o()()()(),i(18,"button",8),w("click",function(){S(e);let r=l(2);return v(r.onClick())}),p(19," Empezar "),o()()}}function H(n,t){if(n&1&&h(0,W,20,0,"div",2),n&2){let e=l();m("ngIf",!e.isDesktop)}}function J(n,t){if(n&1){let e=I();i(0,"front-back-id",12),w("nextStepEvent",function(r){S(e);let P=l(3);return v(P.onStepEvent(r))}),o()}if(n&2){let e=l(3);m("session",e.session)}}function X(n,t){if(n&1){let e=I();i(0,"selfie",12),w("nextStepEvent",function(r){S(e);let P=l(3);return v(P.onStepEvent(r))}),o()}if(n&2){let e=l(3);m("session",e.session)}}function Y(n,t){if(n&1&&(i(0,"div",10),h(1,J,1,1,"front-back-id",11)(2,X,1,1,"selfie",11),o()),n&2){let e=l(2);m("ngSwitch",e.step),x(),m("ngSwitchCase",0),x(),m("ngSwitchCase",1)}}function Z(n,t){if(n&1&&(i(0,"div",1),h(1,Y,3,3,"div",9),o()),n&2){let e=l();x(),m("ngIf",!e.isDesktop&&e.session)}}var z=class n{isCameraIntroVisible=!1;isGeolocationValid=!1;step=0;session=null;isDesktop=!0;subscription;incodeSDK=C(g);router=C(B);stateBiometricService=C(Q);destroyRef=C(V);constructor(){let t=T(()=>{console.log("Signal changed:",this.stateBiometricService.startBiometric()),this.stateBiometricService.startBiometric()&&(this.isCameraIntroVisible=!0,console.log("Camera intro visibility toggled:",this.isCameraIntroVisible))});this.destroyRef.onDestroy(()=>{t.destroy()})}ngOnInit(){this.isDesktop=this.incodeSDK.incode.isDesktop()}ngAfterViewInit(){this.isDesktop||(this.subscription=this.incodeSDK.createSession().subscribe(t=>{this.session=t,console.log("SUGESTIONS_CameraComponent initialized",this.session)}))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}onStepEvent(t){if(console.log("StepEvent changed: "+this.step),this.step===2&&this.incodeSDK.completeSession(this.session.uniqueId),t==="selfie"&&(this.step=this.step+2,console.log("Skipping to selfie step, current step:",this.step)),this.step<3){this.step++;return}}onClick(){console.log("Camera intro visibility toggled:",this.isCameraIntroVisible),this.isDesktop||this.router.navigate(["/location"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-suggestions-camera"]],standalone:!0,features:[u],decls:2,vars:1,consts:[[1,"container"],[1,"main"],["class","container",4,"ngIf"],[1,"content-center"],["src","assets/img/user-camera.svg","alt","C\xE1mara usuario",1,"camera-img"],["src","assets/img/Union.svg","alt","Icono lugar c\xF3modo"],["src","assets/img/Icon-bio.svg","alt","Icono expresi\xF3n neutra"],["src","assets/img/Icon-ID.svg","alt","Icono documento"],[1,"btn-primary",3,"click"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[3,"session","nextStepEvent",4,"ngSwitchCase"],[3,"nextStepEvent","session"]],template:function(e,a){e&1&&h(0,H,1,1,"div",0)(1,Z,2,1,"div",1),e&2&&F(a.isCameraIntroVisible?1:0)},dependencies:[f,K,A,N,M,O],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;height:100vh;width:100vw;box-sizing:border-box}.content-center[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1 0 auto;min-height:60vh}h1[_ngcontent-%COMP%]{color:#002850;font-size:18px;font-weight:400;text-align:center;font-family:Gilroy-Bold,sans-serif;padding-bottom:64px}li[_ngcontent-%COMP%]{border-bottom:1px solid rgb(217,217,217);font-family:Gilroy-Regular,sans-serif;font-size:16px;font-weight:400;list-style:none;padding-bottom:12px;padding-top:8px}li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:21px;width:21px}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:8px}.main[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:100%;padding-top:32px;width:100%;background-color:#fbfbfb}ul[_ngcontent-%COMP%]{padding:0;margin:0;width:100%;max-width:600px}"]})};export{z as SuggestionsCameraComponent};
