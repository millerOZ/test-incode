import{a as Q,b as g}from"./chunk-IVVUZLMP.js";import{b as E}from"./chunk-DOBZLDMO.js";import{Ba as D,Ca as _,Da as j,Ea as T,Fa as S,Ha as f,I as a,M as P,N as l,P as m,_a as k,bb as u,i as I,ka as b,la as d,ra as w,sa as R,ta as O,ua as x,wa as r,x as M,xa as o,ya as p}from"./chunk-SQOWPWAF.js";import{j as c}from"./chunk-WLMSNEJV.js";var F=["redirectToMobile"],v=class i{constructor(e){this.incodeSDK=e;O(()=>c(this,null,function*(){this.renderRedirectToMobile()}),{phase:R.Write})}qrUrl="";session;redirectToMobileRef;renderRedirectToMobile(){return c(this,null,function*(){yield this.incodeSDK.incode.renderRedirectToMobile(this.redirectToMobileRef?.nativeElement,{session:this.session,url:`${window.location.origin}/suggestion`,showSms:!1,onSuccess:()=>{this.incodeSDK.incode.renderQrCode(this.redirectToMobileRef?.nativeElement,{session:this.session,onSuccess:e=>{}})}})})}static \u0275fac=function(t){return new(t||i)(d(g))};static \u0275cmp=m({type:i,selectors:[["qr"]],viewQuery:function(t,n){if(t&1&&_(F,5),t&2){let s;j(s=T())&&(n.redirectToMobileRef=s.first)}},inputs:{session:"session"},standalone:!0,features:[f],decls:4,vars:0,consts:[["redirectToMobile",""],[1,"module-content"],["src","assets/img/vector.svg","alt","",1,"image-center","active"]],template:function(t,n){t&1&&(r(0,"div",1),p(1,"img",2)(2,"div",null,0),o())},dependencies:[u],styles:[".module-content[_ngcontent-%COMP%]{align-items:center;flex-direction:column;display:flex;justify-content:center;width:750px;height:567px;border-radius:25px;box-shadow:0 4px 8px #0000001a;background-color:#fff}.module-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:345px}[_nghost-%COMP%]     .dxTaMz{color:#838383;size:16px;white-space:nowrap;font-weight:400;text-align:left;font-family:Gilroy-Bold,sans-serif;display:flex;justify-content:end;padding-top:50px}[_nghost-%COMP%]     .hvJvq{display:flex;flex-direction:column-reverse}[_nghost-%COMP%]     .fYoiqP{font-family:Gilroy-regular,sans-serif;font-size:16px;font-weight:400;line-height:100%;letter-spacing:0%}[_nghost-%COMP%]     .dkdMnC{border-top:1px solid white}.image-center[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;height:56px;transition:all .4s cubic-bezier(.25,.46,.45,.94);max-width:80vw;max-height:80vh;object-fit:contain;z-index:9999;opacity:0;visibility:hidden}.image-center.active[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(-50%,-335%) scale(1)}"]})};var h=class i{constructor(){}validateSessionIncode(){return I({activeQr:!0,activeIncode:!0}).pipe(M(500))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};var y=class i{constructor(e){this.route=e}getAllParams(){return new Promise(e=>{this.route.queryParams.subscribe(t=>{e(t)})})}getParam(e){return new Promise((t,n)=>{this.route.queryParams.subscribe(s=>{s[e]&&t(s[e]??null)})})}static \u0275fac=function(t){return new(t||i)(P(E))};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};function K(i,e){if(i&1&&(r(0,"div")(1,"h1"),S(2,"!Muy bien! Ahora te pediremos algunas fotos"),o(),r(3,"p"),S(4,"Escanea el c\xF3digo QR para acceder desde tu dispositivo m\xF3vil."),o(),p(5,"qr",2),o()),i&2){let t=D();b(5),x("session",t.session)}}var q=class i{constructor(e){this.urlParamsService=e}session=null;isDesktop=!0;subscription;configService=l(h);incodeSDK=l(g);stateBiometricService=l(Q);ngOnInit(){this.isDesktop=this.incodeSDK.incode.isDesktop(),this.validateSessionIncode()}getSessionIncode(){this.subscription=this.incodeSDK.createSession().subscribe(e=>{this.session=e})}getAllParams(){return c(this,null,function*(){try{yield this.urlParamsService.getAllParams().then(e=>{console.log("All URL parameters:",e)})}catch(e){console.error("Error retrieving URL parameters:",e)}})}validateSessionIncode(){this.isDesktop&&this.configService.validateSessionIncode().subscribe({next:e=>{e.activeIncode&&this.getSessionIncode()},error:e=>{console.error("Error in validateSessionIncode:",e)}})}static \u0275fac=function(t){return new(t||i)(d(y))};static \u0275cmp=m({type:i,selectors:[["app-home"]],standalone:!0,features:[f],decls:2,vars:1,consts:[[1,"main"],[4,"ngIf"],[1,"qr",3,"session"]],template:function(t,n){t&1&&(r(0,"main",0),w(1,K,6,1,"div",1),o()),t&2&&(b(),x("ngIf",n.session&&n.isDesktop))},dependencies:[u,k,v],styles:[".finish[_ngcontent-%COMP%]{align-items:center!important;display:flex!important;justify-content:center!important}h1[_ngcontent-%COMP%]{font-size:32px;font-weight:400;line-height:32px;font-family:Gilroy-Bold,sans-serif;color:#0f265c}.main[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:100%;width:100%;background-color:#fbfbfb;height:100%;overflow-y:hidden;overflow-x:hidden}p[_ngcontent-%COMP%]{font-family:Gilroy-medium,sans-serif;font-size:23px;font-weight:400;line-height:100%;letter-spacing:0%;color:#0f265c}.qr[_ngcontent-%COMP%]{display:flex!important;justify-content:center!important}"]})};export{q as HomeComponent};
