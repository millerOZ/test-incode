"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:String(e)}function _toPrimitive(e,n){if("object"!=_typeof(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===n?String:Number)(e);t=t.call(e,n||"default");if("object"!=_typeof(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define(["axios"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("axios")):(void 0).OTKAnalytics=e()}(function(t){function n(e){var n,e=function(e){if(!e.clientVersion)throw console.log("Error. The clientVersion field cannot be null in the log entry"),new Error("The clientVersion field cannot be null in the log entry");if(!e.source)throw console.log("Error. The source field cannot be null in the log entry"),new Error("The source field cannot be null in the log entry");if(!e.componentId)throw console.log("Error. The componentId field cannot be null in the log entry"),new Error("The componentId field cannot be null in the log entry");var n,t;if(e.name)return n=e.logVersion||"2",t=e.clientSystemTime||(new Date).getTime(),Object.assign({},e,{logVersion:n,clientSystemTime:t});throw console.log("Error. The name field cannot be null in the log entry"),new Error("The guid field cannot be null in the log entry")}(e);i?t.post(r,e):((n=new XMLHttpRequest).open("POST",r,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(e)))}var r,i=!1,l=function(e,n,t){var o,r;return i||(o="",t&&((r=new Date).setTime(r.getTime()+24*t*60*60*1e3),o=["; expires=",r.toGMTString()].join("")),t=[e,"=",n,o,"; path=/"].join(""),document.cookie=t),n},a=function(e){if(!i)for(var n,t="".concat(e,"="),o=document.cookie.split(";"),r=0;r<o.length;r++){for(n=o[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null},c=function(){for(var e=[],n="0123456789abcdef",t=0;t<36;t++)e.push(n.substr(Math.floor(16*Math.random()),1));return e[14]="4",e[19]=n.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")};return function(){function o(e,n){_classCallCheck(this,o),this.analyticsData=e,i=n&&n.server;var t="hlg.tokbox.com/prod/logging/ClientEvent";n&&n.loggingUrl&&(t=n.loggingUrl),r=n&&n.proxyUrl&&"".concat(n.proxyUrl,"/").concat(t)||"https://".concat(t),this.analyticsData.guid=(n=e.name,a(n)||l(n,c(),7))}return _createClass(o,[{key:"addSessionInfo",value:function(e){if(!e.sessionId)throw console.log("Error. The sessionId field cannot be null in the log entry"),new Error("The sessionId field cannot be null in the log entry");if(this.analyticsData.sessionId=e.sessionId,!e.connectionId)throw console.log("Error. The connectionId field cannot be null in the log entry"),new Error("The connectionId field cannot be null in the log entry");if(this.analyticsData.connectionId=e.connectionId,0===e.partnerId)throw console.log("Error. The partnerId field cannot be null in the log entry"),new Error("The partnerId field cannot be null in the log entry");this.analyticsData.partnerId=e.partnerId}},{key:"logEvent",value:function(e){this.analyticsData=Object.assign({},this.analyticsData,e,{clientSystemTime:(new Date).getTime()}),n(this.analyticsData)}}]),o}()});